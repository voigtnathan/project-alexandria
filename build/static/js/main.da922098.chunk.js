(this.webpackJsonpproject_alexandria=this.webpackJsonpproject_alexandria||[]).push([[0],{39:function(e,t,a){e.exports=a(72)},67:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(19),l=a.n(s),c=a(14),i=a(5),o=a(37);a(48);var u=Object(c.c)({loginMessage:(e="",t)=>{switch(t.type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:(e="",t)=>{switch(t.type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}});var m=(e={},t)=>{switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}};var p=Object(c.c)({errors:u,user:m}),d=a(7),h=a.n(d),E=a(8),b=a(16),g=a.n(b),v=h.a.mark(x),O=h.a.mark(R),f=h.a.mark(w);function x(e){var t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(E.b)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=6,g.a.post("/api/user/login",e.payload,t);case 6:return a.next=8,Object(E.b)({type:"FETCH_USER"});case 8:a.next=20;break;case 10:if(a.prev=10,a.t0=a.catch(0),console.log("Error with user login:",a.t0),401!==a.t0.response.status){a.next=18;break}return a.next=16,Object(E.b)({type:"LOGIN_FAILED"});case 16:a.next=20;break;case 18:return a.next=20,Object(E.b)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return a.stop()}}),v,null,[[0,10]])}function R(e){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,g.a.post("/api/user/logout",t);case 4:return e.next=6,Object(E.b)({type:"UNSET_USER"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 11:case"end":return e.stop()}}),O,null,[[0,8]])}function w(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("LOGIN",x);case 2:return e.next=4,Object(E.c)("LOGOUT",R);case 4:case"end":return e.stop()}}),f)}var N=w,y=h.a.mark(j),I=h.a.mark(C);function j(e){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.b)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,g.a.post("/api/user/register",e.payload);case 5:return t.next=7,Object(E.b)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(E.b)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(E.b)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}}),y,null,[[0,11]])}function C(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("REGISTER",j);case 2:case"end":return e.stop()}}),I)}var _=C,L=h.a.mark(S),T=h.a.mark(k);function S(){var e,t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,g.a.get("/api/user",e);case 4:return t=a.sent,a.next=7,Object(E.b)({type:"SET_USER",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 12:case"end":return a.stop()}}),L,null,[[0,9]])}function k(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.c)("FETCH_USER",S);case 2:case"end":return e.stop()}}),T)}var A=k,F=h.a.mark(G);function G(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([N(),_(),A()]);case 2:case"end":return e.stop()}}),F)}var U=a(15),D=a(6);var P=Object(i.b)()(e=>n.a.createElement("button",{className:e.className,onClick:()=>e.dispatch({type:"LOGOUT"})},"Log Out"));a(67);var q=e=>({store:e});var M=Object(i.b)(q)(e=>{let t={path:"/login",text:"Login / Register"};return null!=e.store.user.id&&(t.path="/user",t.text="Home"),n.a.createElement("div",{className:"nav"},n.a.createElement(U.b,{to:"/home"},n.a.createElement("h2",{className:"nav-title"},"Project Alexandria")),n.a.createElement("div",{className:"nav-right"},n.a.createElement(U.b,{className:"nav-link",to:t.path},t.text),e.store.user.id&&n.a.createElement(n.a.Fragment,null,n.a.createElement(U.b,{className:"nav-link",to:"/info"},"Info Page"),n.a.createElement(P,{className:"nav-link"})),n.a.createElement(U.b,{className:"nav-link",to:"/about"},"About")))});a(69);var H=()=>n.a.createElement("footer",null,"\xa9 Project Alexandria"),V=a(38);class J extends r.Component{constructor(...e){super(...e),this.state={username:"",password:""},this.login=e=>{e.preventDefault(),this.state.username&&this.state.password?this.props.dispatch({type:"LOGIN",payload:{username:this.state.username,password:this.state.password}}):this.props.dispatch({type:"LOGIN_INPUT_ERROR"})},this.handleInputChangeFor=e=>t=>{this.setState({[e]:t.target.value})}}render(){return n.a.createElement("form",{className:"formPanel",onSubmit:this.login},n.a.createElement("h2",null,"Login"),this.props.store.errors.loginMessage&&n.a.createElement("h3",{className:"alert",role:"alert"},this.props.store.errors.loginMessage),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"username"},"Username:",n.a.createElement("input",{type:"text",name:"username",required:!0,value:this.state.username,onChange:this.handleInputChangeFor("username")}))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"password"},"Password:",n.a.createElement("input",{type:"password",name:"password",required:!0,value:this.state.password,onChange:this.handleInputChangeFor("password")}))),n.a.createElement("div",null,n.a.createElement("input",{className:"btn",type:"submit",name:"submit",value:"Log In"})))}}var z=Object(i.b)(q)(J);class B extends r.Component{render(){return n.a.createElement("div",null,n.a.createElement(z,null),n.a.createElement("center",null,n.a.createElement("button",{type:"button",className:"btn btn_asLink",onClick:()=>{this.props.history.push("/registration")}},"Register")))}}var Q=Object(i.b)(q)(B);var W=Object(i.b)(q)(e=>{const t=e.component,a=e.authRedirect,r=e.store,s=Object(V.a)(e,["component","authRedirect","store"]);let l;return l=r.user.id?t:Q,r.user.id&&null!=a?n.a.createElement(D.a,{exact:!0,from:s.path,to:a}):(r.user.id||null==a||(l=t),n.a.createElement(D.b,Object.assign({},s,{component:l})))});var Y=()=>n.a.createElement("div",{className:"container"},n.a.createElement("div",null,n.a.createElement("p",null,"This about page is for anyone to read!")));class K extends r.Component{render(){return n.a.createElement("div",null,n.a.createElement("h1",{id:"welcome"},"Welcome, ",this.props.store.user.username,"!"),n.a.createElement("p",null,"Your ID is: ",this.props.store.user.id),n.a.createElement(P,{className:"log-in"}))}}var X=Object(i.b)(q)(K);var Z=()=>n.a.createElement("div",null,n.a.createElement("p",null,"Info Page"));a(70);class $ extends r.Component{constructor(...e){super(...e),this.state={username:"",password:""},this.registerUser=e=>{e.preventDefault(),this.props.dispatch({type:"REGISTER",payload:{username:this.state.username,password:this.state.password}})},this.handleInputChangeFor=e=>t=>{this.setState({[e]:t.target.value})}}render(){return n.a.createElement("form",{className:"formPanel",onSubmit:this.registerUser},n.a.createElement("h2",null,"Register User"),this.props.store.errors.registrationMessage&&n.a.createElement("h3",{className:"alert",role:"alert"},this.props.store.errors.registrationMessage),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"username"},"Username:",n.a.createElement("input",{type:"text",name:"username",value:this.state.username,required:!0,onChange:this.handleInputChangeFor("username")}))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"password"},"Password:",n.a.createElement("input",{type:"password",name:"password",value:this.state.password,required:!0,onChange:this.handleInputChangeFor("password")}))),n.a.createElement("div",null,n.a.createElement("input",{className:"btn",type:"submit",name:"submit",value:"Register"})))}}var ee=Object(i.b)(q)($);class te extends r.Component{constructor(...e){super(...e),this.state={heading:"Class Component"},this.onLogin=e=>{this.props.history.push("/login")}}render(){return n.a.createElement("div",{className:"container"},n.a.createElement("h2",null,this.state.heading),n.a.createElement("div",{className:"grid"},n.a.createElement("div",{className:"grid-col grid-col_8"},n.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur id felis metus. Vestibulum et pulvinar tortor. Morbi pharetra lacus ut ex molestie blandit. Etiam et turpis sit amet risus mollis interdum. Suspendisse et justo vitae metus bibendum fringilla sed sed justo. Aliquam sollicitudin dapibus lectus, vitae consequat odio elementum eget. Praesent efficitur eros vitae nunc interdum, eu interdum justo facilisis. Sed pulvinar nulla ac dignissim efficitur. Quisque eget eros metus. Vestibulum bibendum fringilla nibh a luctus. Duis a sapien metus."),n.a.createElement("p",null,"Praesent consectetur orci dui, id elementum eros facilisis id. Sed id dolor in augue porttitor faucibus eget sit amet ante. Nunc consectetur placerat pharetra. Aenean gravida ex ut erat commodo, ut finibus metus facilisis. Nullam eget lectus non urna rhoncus accumsan quis id massa. Curabitur sit amet dolor nisl. Proin euismod, augue at condimentum rhoncus, massa lorem semper lacus, sed lobortis augue mi vel felis. Duis ultrices sapien at est convallis congue."),n.a.createElement("p",null,"Fusce porta diam ac tortor elementum, ut imperdiet metus volutpat. Suspendisse posuere dapibus maximus. Aliquam vitae felis libero. In vehicula sapien at semper ultrices. Vivamus sed feugiat libero. Sed sagittis neque id diam euismod, ut egestas felis ultricies. Nullam non fermentum mauris. Sed in enim ac turpis faucibus pretium in sit amet nisi.")),n.a.createElement("div",{className:"grid-col grid-col_4"},n.a.createElement(ee,null),n.a.createElement("center",null,n.a.createElement("h4",null,"Already a Member?"),n.a.createElement("button",{className:"btn btn_sizeSm",onClick:this.onLogin},"Login")))))}}var ae=Object(i.b)(q)(te);class re extends r.Component{constructor(...e){super(...e),this.state={username:"",password:""}}render(){return n.a.createElement("div",null,n.a.createElement(ee,null),n.a.createElement("center",null,n.a.createElement("button",{type:"button",className:"btn btn_asLink",onClick:()=>{this.props.history.push("/login")}},"Login")))}}var ne=Object(i.b)(q)(re);a(71);class se extends r.Component{componentDidMount(){this.props.dispatch({type:"FETCH_USER"})}render(){return n.a.createElement(U.a,null,n.a.createElement("div",null,n.a.createElement(M,null),n.a.createElement(D.d,null,n.a.createElement(D.a,{exact:!0,from:"/",to:"/home"}),n.a.createElement(D.b,{exact:!0,path:"/about",component:Y}),n.a.createElement(W,{exact:!0,path:"/user",component:X}),n.a.createElement(W,{exact:!0,path:"/info",component:Z}),n.a.createElement(W,{exact:!0,path:"/login",component:Q,authRedirect:"/user"}),n.a.createElement(W,{exact:!0,path:"/registration",component:ne,authRedirect:"/user"}),n.a.createElement(W,{exact:!0,path:"/home",component:ae,authRedirect:"/user"}),n.a.createElement(D.b,{render:()=>n.a.createElement("h1",null,"404")})),n.a.createElement(H,null)))}}var le=Object(i.b)()(se);const ce=Object(o.a)(),ie=[ce],oe=Object(c.e)(p,Object(c.a)(...ie));ce.run(G),l.a.render(n.a.createElement(i.a,{store:oe},n.a.createElement(le,null)),document.getElementById("react-root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.da922098.chunk.js.map